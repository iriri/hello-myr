use std

use "lwt"
use "sched"

const main = {
	var w = "world\n"
	var world = {
		for var i = 0; i < 10; i++
			std.put(w)
			lwt.yield()
		;;
	}
	lwt.init()
	lwt.spawn(hello)
	lwt.spawn(world)
	lwt.yield()
	for var i = 0; i < 10; i++
		std.put(".\n")
		lwt.yield()
	;;
	std.put("done\n")
}

const hello = {
	for var i = 0; i < 10; i++
		std.put("hello\n")
		lwt.yield()
	;;
}
